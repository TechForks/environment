#!/usr/bin/env ruby -w

#
# Copyright (c) 2013 by Lifted Studios.  All Rights Reserved.
#

lib = File.expand_path('../../lib', __FILE__)
$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)

require 'shell_utilities'

include ShellUtilities

def report(dir)
  File.join(dir, 'coverage/index.html')
end

dir = climb { |d| File.exists?(report(d)) }

unless dir
  puts 'No coverage report found'
  exit 1
end

sh "open #{report(dir)}"
